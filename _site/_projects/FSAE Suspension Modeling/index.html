<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/syntax.css">

    <script src="/assets/js/script.js"></script>
    
    <!-- MathJax (LaTeX support) -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          packages: {'[+]': ['ams']}
        },
        chtml: { displayAlign: 'center' }
      };
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
      async>
    </script>
    <!-- End MathJax -->

<!-- Favicon -->
<link rel="icon" href="/assets/favicon_io/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon_io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon_io/favicon-16x16.png">
<link rel="apple-touch-icon" href="/assets/favicon_io/apple-touch-icon.png">
<!-- End Favicon -->

<!-- PREVIEW METADATA -->
<meta property="og:type" content="website">
<meta property="og:url" content="http://localhost:4000/_projects/FSAE%20Suspension%20Modeling/">
<meta property="og:title" content="FSAE Suspension Dynamics Modeling">


<meta property="og:description" content="Characterized the dynamic response of the Cooper Union FSAE car’s front suspension by developing a four-bar linkage kinematic model and validating simulated free oscillation against experimental vi...">


  
  

  
  

  
  
  
  

  <meta property="og:image" content="https:/raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Sus.png">
  <meta name="twitter:image" content="https:/raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Sus.png">


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="FSAE Suspension Dynamics Modeling">
<meta name="twitter:description" content="Characterized the dynamic response of the Cooper Union FSAE car’s front suspension by developing a four-bar linkage kinematic model and validating simulated free oscillation against experimental vi...">
<meta name="twitter:image:aspect_ratio" content="1.91:1">
<!-- END PREVIEW METADATA -->

<!-- GLightbox for Image Galleries -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
    
    <title>Zeshui Song's Portfolio</title>
</head>
<body>
    <!-- NAVBAR -->
     <style>
    /* 1. Define a consistent breakpoint for the "Mobile UI" */
    @media (max-width: 768px) {
        #mainNav {
            height: 20px !important; 
            padding: 0 !important;
            margin-bottom: 40px !important;
        }
        #canvasParent { display: none !important; }
        .desktop-nav { display: none !important; }
        .menu-toggle {
            display: block !important;
            margin-top: 40px !important; 
            background: none;
            border: none;
            cursor: pointer;
            z-index: 11;
            position: relative;
        }
    }

    /* Desktop defaults */
    .menu-toggle { display: none; outline: none; color: var(--text-color, #000); }
    .mobile-nav { display: none; }
    .nav-open .mobile-nav {
        display: flex; flex-direction: column; position: absolute;
        top: 60px; right: 0; background: #fff; width: 100%;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 10;
    }
    .mobile-nav a { padding: 15px; text-align: center; border-bottom: 1px solid #eee; text-decoration: none; color: #333; }
</style>

<nav id="mainNav" style="display: flex; align-items: center; justify-content: space-between; padding: 10px 0; height: 80px; position: relative;">
    <div id="canvasParent" style="flex: 1; height: 100%; display: flex; align-items: center; overflow: hidden; margin-right: 20px;">
        <canvas id="cycloidCanvas" style="width: 100%; height: 60px; display: block;"></canvas>
    </div>

    <div class="right desktop-nav">
        <a href="/"><span>Home</span></a>
        <a href="/projects/"><span>Projects</span></a>
        <a href="/research/"><span>Research</span></a>
        <a href="/about/"><span>About</span></a>
        <a href="/Resume/main.pdf" target="_blank" rel="noopener noreferrer">
            <span>Resume</span>
        </a>
    </div>

    <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
        <i class="fa fa-bars fa-2x"></i>
    </button>

    <div class="mobile-nav">
        <a href="/"><span>Home</span></a>
        <a href="/projects/"><span>Projects</span></a>
        <a href="/research/"><span>Research</span></a>
        <a href="/about/"><span>About</span></a>
        <a href="/Resume/main.pdf" target="_blank" rel="noopener noreferrer">
            <span>Resume</span>
        </a>
    </div>
</nav>

<script>
    const canvas = document.getElementById('cycloidCanvas');
    const ctx = canvas.getContext('2d');
    const parent = document.getElementById('canvasParent');
    const mainNav = document.getElementById('mainNav');
    const menuToggle = document.getElementById('menuToggle');

    const isAboutPage = window.location.pathname.includes('/about/');
    const isResearchPage = window.location.pathname.includes('/research/');
    const isProjectsPage = window.location.pathname.includes('/projects/');

    let angle = 0, xOffset = 0, direction = 1, isErasing = false;
    let waveTime = 0, wavefrontX = 0, reflectedFrontX = 0, wavePhase = 'propagating';
    let particles = [];
    const numParticles = 8;
    const radius = 14, armLength = 22, speed = 0.05, agnesiSpeed = 0.8; 
    let points = [];
    let isRolling = true, dpr, w, h, centerY;

    menuToggle.addEventListener('click', () => {
        mainNav.classList.toggle('nav-open');
    });

    function createCRTParticle() {
        const spread = 44;
        const startY = centerY + (Math.random() - 0.5) * spread;
        const normalizedY = (startY - (centerY - spread/2)) / spread;
        const hue = 240 - (normalizedY * 65); 
        const colorHue = hue;

        return {
            x: -20, 
            y: startY, 
            vx: 1.0 + Math.random() * 0.8, 
            vy: 0, 
            charge: Math.random() > 0.5 ? 1 : -1, 
            hue: colorHue,
            hasHit: false,
            headOpacity: 1.0,
            history: []
        };
    }

    function resize() {
        if (!parent) return;
        dpr = window.devicePixelRatio || 1;
        w = parent.offsetWidth;
        h = 60; 
        canvas.width = w * dpr;
        canvas.height = h * dpr;
        ctx.scale(dpr, dpr);
        centerY = h / 2; 
        points = [];
        angle = 0;
        xOffset = -(w * 0.45);
        direction = 1; isErasing = false; isRolling = true;
        wavefrontX = 40; reflectedFrontX = w - 40; wavePhase = 'propagating';
        particles = Array.from({ length: numParticles }, createCRTParticle);
    }

    window.addEventListener('resize', resize);
    resize();

    function draw() {
        if (mainNav.classList.contains('nav-open') || getComputedStyle(document.getElementById('canvasParent')).display === 'none') {
            requestAnimationFrame(draw);
            return;
        }

        ctx.clearRect(0, 0, w, h);
        let px, py, centerX;
        const limit = w * 0.45;

        if (isResearchPage) {
            waveTime += 0.05;
            const margin = 40, rightBound = w - margin, propSpeed = 2.5;
            const pipeHalfHeight = 25, amp = 12, L = rightBound - margin, freq = (2 * Math.PI) / (L / 2);

            if (wavePhase === 'propagating') {
                wavefrontX += propSpeed;
                if (wavefrontX >= rightBound) { wavefrontX = rightBound; wavePhase = 'reflecting'; }
            } else if (wavePhase === 'reflecting') {
                reflectedFrontX -= propSpeed;
                if (reflectedFrontX <= margin) { reflectedFrontX = margin; wavePhase = 'steady'; }
            }

            ctx.beginPath();
            ctx.strokeStyle = '#000'; ctx.lineWidth = 2.5;
            ctx.moveTo(margin, centerY - pipeHalfHeight); ctx.lineTo(rightBound, centerY - pipeHalfHeight);
            ctx.moveTo(margin, centerY + pipeHalfHeight); ctx.lineTo(rightBound, centerY + pipeHalfHeight);
            ctx.stroke();

            ctx.beginPath(); ctx.strokeStyle = '#ddd'; ctx.lineWidth = 1.2;
            for (let x = margin; x <= wavefrontX; x++) {
                const y = centerY + amp * Math.cos(freq * (x - margin) - waveTime);
                if (x === margin) ctx.moveTo(x, y); else ctx.lineTo(x, y);
            }
            ctx.stroke();

            if (wavePhase !== 'propagating') {
                ctx.beginPath(); ctx.setLineDash([4, 4]); ctx.strokeStyle = '#ccc';
                for (let x = rightBound; x >= reflectedFrontX; x--) {
                    const y = centerY + amp * Math.cos(freq * (x - margin) + waveTime);
                    if (x === rightBound) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                }
                ctx.stroke(); ctx.setLineDash([]);
                
                ctx.beginPath(); ctx.strokeStyle = 'rgba(0, 123, 255, 0.7)'; ctx.lineWidth = 2.5;
                for (let x = reflectedFrontX; x <= rightBound; x++) {
                    const y1 = amp * Math.cos(freq * (x - margin) - waveTime);
                    const y2 = amp * Math.cos(freq * (x - margin) + waveTime);
                    const y = centerY + (y1 + y2);
                    if (x === Math.ceil(reflectedFrontX)) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }

        } else if (isProjectsPage) {
            const plateX = w - 20;
            const fieldEnd = plateX - 40; 
            const fieldStart = fieldEnd - 50; 

            ctx.fillStyle = 'rgba(50, 50, 50, 0.1)';
            ctx.fillRect(fieldStart, 5, fieldEnd - fieldStart, h - 10);
            
            ctx.beginPath();
            ctx.moveTo(plateX, 5); ctx.lineTo(plateX, h - 5);
            ctx.lineWidth = 3; ctx.strokeStyle = '#222'; ctx.stroke();

            particles.forEach((p, idx) => {
                if (!p.hasHit) {
                    p.history.push({x: p.x, y: p.y});
                    if (p.x > fieldStart && p.x < fieldEnd) {
                        const fieldStrength = 0.016; 
                        p.vy += fieldStrength * p.charge;
                    }
                    p.x += p.vx;
                    p.y += p.vy;

                    if (p.x >= plateX) {
                        p.x = plateX;
                        p.hasHit = true;
                    }
                    // Off-screen handling
                    if (p.y > h + 20 || p.y < -20) p.hasHit = true; 
                } else {
                    // Start erasing the tail as soon as it hits or goes off screen
                    if (p.history.length > 0) {
                        p.history.shift();
                    } else {
                        // Once trace is gone, fade out the particle head
                        p.headOpacity -= 0.1;
                    }
                }

                // Draw Path Trace
                if (p.history.length > 1) {
                    ctx.beginPath();
                    ctx.strokeStyle = `hsla(${p.hue}, 100%, 50%, 0.45)`;
                    ctx.lineWidth = 1.6;
                    ctx.moveTo(p.history[0].x, p.history[0].y);
                    for(let i=1; i < p.history.length; i++) {
                        ctx.lineTo(p.history[i].x, p.history[i].y);
                    }
                    ctx.stroke();
                }

                // Draw Particle Head (if it hasn't hit or is still fading)
                if (p.headOpacity > 0 && p.history.length > 0) {
                     ctx.beginPath();
                     ctx.arc(p.x, p.y, 2.4, 0, Math.PI * 2);
                     ctx.fillStyle = `hsla(${p.hue}, 100%, 50%, ${p.headOpacity})`;
                     ctx.fill();
                }

                // Respawn when fully invisible
                if (p.headOpacity <= 0) {
                    particles[idx] = createCRTParticle();
                }
            });

        } else if (isAboutPage) {
            const a = radius; centerX = w / 2;
            const groundY = h - 10; px = centerX + xOffset;
            const yFromBottom = (8 * Math.pow(a, 3)) / (Math.pow(xOffset, 2) + 4 * Math.pow(a, 2));
            py = groundY - yFromBottom;

            if (!isErasing) {
                points.push({x: px, y: py});
                xOffset += (agnesiSpeed * direction);
                if (xOffset > limit || xOffset < -limit) isErasing = true;
            } else {
                if (points.length > 0) points.splice(0, 4); 
                else { direction *= -1; isErasing = false; }
            }
        } else {
            centerX = (radius * angle) - radius;
            px = centerX - armLength * Math.sin(angle);
            py = centerY + armLength * Math.cos(angle);

            if (isRolling) {
                points.push({x: px, y: py});
                angle += speed;
                if (centerX > w + armLength + radius) isRolling = false;
            } else {
                if (points.length > 0) points.splice(0, 3);
                else { isRolling = true; angle = 0; }
            }
        }

        if (!isResearchPage && !isProjectsPage && points.length > 1) {
            ctx.beginPath(); ctx.strokeStyle = 'rgba(0, 123, 255, 0.4)';
            ctx.lineWidth = 2.5; ctx.lineCap = 'round';
            ctx.moveTo(points[0].x, points[0].y);
            for (let i = 1; i < points.length; i++) ctx.lineTo(points[i].x, points[i].y);
            ctx.stroke();
        }

        if (!isResearchPage && !isProjectsPage && (isAboutPage || isRolling)) {
            ctx.lineWidth = 1.2;
            if (isAboutPage) {
                const a = radius, groundY = h - 10, circleX = w / 2, circleY = groundY - a, topY = groundY - 2 * a;
                ctx.beginPath(); ctx.moveTo(centerX - limit, topY); ctx.lineTo(centerX + limit, topY);
                ctx.strokeStyle = '#eee'; ctx.stroke();
                ctx.beginPath(); ctx.arc(circleX, circleY, a, 0, Math.PI * 2);
                ctx.strokeStyle = '#444'; ctx.stroke();
                const yFromBottom = groundY - py;
                const intersectionX = circleX + (yFromBottom * (xOffset / (2 * a)));
                ctx.setLineDash([2, 2]); ctx.strokeStyle = '#bbb';
                ctx.beginPath(); ctx.moveTo(circleX, groundY); ctx.lineTo(px, topY); ctx.stroke();
                ctx.strokeStyle = '#28a745'; ctx.beginPath();
                ctx.moveTo(px, py); ctx.lineTo(px, topY); ctx.moveTo(px, py); ctx.lineTo(intersectionX, py); ctx.stroke();
                ctx.setLineDash([]); ctx.beginPath(); ctx.arc(intersectionX, py, 3, 0, Math.PI * 2);
                ctx.fillStyle = '#888'; ctx.fill();
            } else {
                ctx.beginPath(); ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                ctx.strokeStyle = '#444'; ctx.stroke();
                ctx.beginPath(); ctx.moveTo(centerX, centerY); ctx.lineTo(px, py);
                ctx.strokeStyle = '#bbb'; ctx.stroke();
            }
            ctx.beginPath(); ctx.arc(px, py, 4, 0, Math.PI * 2);
            ctx.fillStyle = '#007bff'; ctx.fill();
        }
        requestAnimationFrame(draw);
    }
    draw();
</script>

     <div class="page"><style>
    /* 1. Reset the header container */
    .post-view .title-header {
        display: block !important; 
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        line-height: 0 !important;
    }

    .project-logo-wrapper {
        display: block !important;
        margin-bottom: 15px !important;
        width: 100% !important;
    }

    /* 2. Target the logo and KILL the 3/1 aspect-ratio from your main CSS */
    .post-view .summary img.project-logo-img {
        /* Dimensions */
        height: 60px !important;    /* Desktop requirement */
        width: auto !important;      /* Stops it from stretching to 100% width */
        
        /* Overriding your main.css rules */
        aspect-ratio: auto !important; /* CRITICAL: Kills the 3/1 crop */
        object-fit: contain !important;
        object-position: left;
        
        /* Resetting spacing */
        margin: 0 !important;
        padding: 0 !important;
        max-width: 100% !important;
        border-radius: 0 !important; /* Removes border-radius if not wanted on logo */
    }

    /* 3. Mobile adjustments */
    @media (max-width: 768px) {
        .post-view .summary img.project-logo-img {
            height: 40px !important; /* Mobile requirement */
        }
    }
</style>

<div class="post-view">
    <div class="summary">
        
               
        <img src="/_projects/FSAE Suspension Modeling//Sus.png" alt="FSAE Suspension Dynamics Modeling image">
        
        <div class="title-header">
            
                <h1>FSAE Suspension Dynamics Modeling</h1>
            
        </div>

        <div class="project-timeline">
            <span class="academic-level">College</span>
            <span class="academic-period">Sophomore Fall</span>
        </div>
        
        <div class="project-description">
            <h2>Project Overview</h2>
            <p>Characterized the dynamic response of the Cooper Union FSAE car’s front suspension by developing a four-bar linkage kinematic model and validating simulated free oscillation against experimental video tracking data.</p>
        </div>
        
        <div class="skills-card">
            <h2>Skills Used</h2> 
            <div class="skills-list">
                
                <span class="skill">Kinematic Modeling</span>    
                
                <span class="skill">4-Bar Linkage Analysis</span>    
                
                <span class="skill">Python (SciPy/solve_ivp)</span>    
                
                <span class="skill">Static Equilibrium Analysis</span>    
                
                <span class="skill">Video Tracking & Validation</span>    
                
            </div>
        </div>
    </div>
      
    <div class="content">
        <p><strong>Team members:</strong> Zeshui Song, Roy He, Ryan Lee<br />
<strong>Course:</strong> ME 200<br />
<strong>Duration:</strong> Nov-Dec 2025</p>

<hr />
<h1 id="how-it-works">How it works</h1>
<p>The project objective was to characterize the dynamic response of the Cooper Union FSAE car’s front suspension. We modeled the system as a four-bar linkage consisting of the upper control arm, pushrod, and shock mount, with the chassis serving as the fixed ground link. By applying a geometric solution to the linkage kinematics and solving for rigid-body static equilibrium, we derived a nonlinear effective spring constant (k<sub>eff</sub>​). This variable stiffness was then integrated into a second-order ordinary differential equation (ODE) to simulate the car’s free oscillation as a spring mass system after being released from a compressed state.</p>

<h1 id="modeling-approach">Modeling Approach</h1>

<h2 id="suspension-geometry--kinematics">Suspension Geometry &amp; Kinematics</h2>
<p>The front suspension was simplified to a planar four-bar linkage consisting of the upper control arm, pushrod, shock mount, and chassis ground. Rather than relying on vector loop equations, linkage positions were solved geometrically using circle–circle intersections, allowing the system configuration to be computed directly from an input arm angle. This approach simplified implementation while remaining numerically robust across the range of motion.</p>

<p><small><em>Comparison of the full suspension system and a simplified four-bar linkage model. The model represents the suspension using the upper control arm ( $l_1$ ), pushrod ( $l_2$ ), and shock mount ( $l_3$ and $l_5$ ), with the chassis ( $l_4$ ) acting as the fixed ground link.</em></small></p>
<div style="width: fit-content; margin: 0 auto;">



<div class="image-gallery" style="--gallery-height: 400px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Sus%20full%20edit.png" class="glightbox" data-gallery="gallery-fsae-suspension-dynamics-modeling">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Sus%20full%20edit.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Sus%20full%20edit.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Kinematics1.png" class="glightbox" data-gallery="gallery-fsae-suspension-dynamics-modeling">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Kinematics1.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Kinematics1.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<p>To define the system geometrically, we first define the positions of the known pivots $A$ and $C$ and the vector $\vec{d}$ connecting them:</p>

\[\begin{align*}
    \vec{A} &amp;= \langle l_1 \cos \theta_1, l_1 \sin \theta_1 \rangle \\
    \vec{C} &amp;= \langle 0, l_4 \rangle \\
    \vec{d} &amp;= \vec{C} - \vec{A}, \quad d = \|\vec{d}\|
\end{align*}\]

<p>We solve for point $B$ by viewing $\triangle ABC$ as two right triangles sharing a height $h$. The projection $a$ of link $l_2$ onto vector $\vec{d}$ and the orthogonal height $h$ are:</p>

\[a = \frac{l_2^2 - l_3^2 + d^2}{2d}, \quad h = \sqrt{l_2^2 - a^2}\]

<p>Point $B$ is located by traversing distance $a$ along the unit vector $\hat{d}$ and distance $h$ along the perpendicular vector $\hat{d}_\perp$:</p>

\[\vec{B} = \vec{A} + a \hat{d} + h \hat{d}_\perp \quad \text{where} \quad \hat{d}_\perp = \left\langle -\frac{d_y}{d}, \frac{d_x}{d} \right\rangle\]

<p>With coordinates for $A$, $B$, and $C$ known, vectors $\vec{l_2}$ and $\vec{l_3}$ are fully defined. Point $D$ is then found using the normal vector of $\vec{l_3}$ and using the length $l_5$. With points $D$ and $E$, we have fully defined the system and can find all the angles using trigonometry.</p>

<p><small><em>Geometry of the linkage variables.</em></small></p>
<div style="width: fit-content; margin: 0 auto;">



<div class="image-gallery" style="--gallery-height: 400px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Geometry.png" class="glightbox" data-gallery="gallery-fsae-suspension-dynamics-modeling">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Geometry.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Geometry.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<p><small><em>Code for generating a complete array of point coordinates from a set of discrete angle inputs.</em></small></p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Geometry Solver for Four-Bar Linkage
</span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">t1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">theta1</span><span class="p">):</span>
<span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">O</span> <span class="o">+</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">([</span><span class="n">l_1</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t1</span><span class="p">),</span> <span class="n">l_1</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t1</span><span class="p">)])</span> <span class="c1"># Point A position
</span><span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">C</span> <span class="o">-</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="c1"># Distance AC
</span>        
<span class="c1"># Using law of cosines to find intersection P and height h
</span><span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">l_2</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">l_3</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">d</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">d</span><span class="p">)</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">l_2</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="o">*</span><span class="p">(</span><span class="n">C</span> <span class="o">-</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">/</span> <span class="n">d</span>

<span class="n">B</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">P</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">h</span><span class="o">*</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">d</span> <span class="c1"># Point Bx
</span><span class="n">B</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">h</span><span class="o">*</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">d</span> <span class="c1"># Point By
</span>        
<span class="c1"># Solve for Point D (perpendicular to link 3)
</span><span class="n">v3</span> <span class="o">=</span> <span class="n">C</span> <span class="o">-</span> <span class="n">B</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="n">n_hat</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">([</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">np</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">v3</span><span class="p">),</span> <span class="o">-</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">np</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="n">norm</span><span class="p">(</span><span class="n">v3</span><span class="p">)])</span>
<span class="n">D</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">C</span> <span class="o">+</span> <span class="n">l_5</span> <span class="o">*</span> <span class="n">n_hat</span>
</code></pre></div></div>

<h2 id="suspension-load-calculations">Suspension Load Calculations</h2>
<p>Assuming a massless suspension, we established a system of 9 static equilibrium equations based on the sum of forces and moments for the disassembled components (shock mount, upper control arm, and pushrod). We specifically solved for the normal reaction force N acting on the pushrod to calculate the effective wheel rate.</p>

<p><small><em>FBDs of disassembled suspension components. Where $N$ is the normal reaction force on the pushrod, and $F_s$ is the force from the shock absorber.</em></small></p>
<div style="width: fit-content; margin: 0 auto;">



<div class="image-gallery" style="--gallery-height: 400px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/FBD.png" class="glightbox" data-gallery="gallery-fsae-suspension-dynamics-modeling">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/FBD.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/FBD.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<p>Sum of forces and moments in the shock mount:</p>

\[\sum F_x = F_s cos\theta_5 +C_x -B_x = 0\]

\[\sum F_y = F_s sin\theta_5 +C_y -B_y = 0\]

\[\sum M_C = l_5F_s sin (\theta_5 - \theta_4) - l_3 B_y cos\theta_3 +L_3B_x sin\theta_3 = 0\]

<p>Sum of forces and moments in the upper control arm ($l_1$):</p>

\[\sum F_x = O_x + A_x =0\]

\[\sum F_y = O_y + A_y =0\]

\[\sum M_O = -l_1 A_x sin\theta_1 + l_1 A_y cos\theta_1 =0\]

<p>Sum of forces and moments in the pushrod ($l_2$):</p>

\[\sum F_x = B_x - A_x =0\]

\[\sum F_y = B_y - A_y + N =0\]

\[\sum M_B = -l_2 B_x sin\theta_2 + l_2 B_y cos\theta_2 =0\]

<p><small><em>Code for solving the system of 9 equations for each linkage position.</em></small></p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -----------------------------
# Solution arrays
</span><span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">th1_arr</span><span class="p">)</span>

<span class="c1"># Positions
</span><span class="n">Ax_arr</span><span class="p">,</span> <span class="n">Ay_arr</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">Bx_arr</span><span class="p">,</span> <span class="n">By_arr</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">Cx_arr</span><span class="p">,</span> <span class="n">Cy_arr</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">Ox_arr</span><span class="p">,</span> <span class="n">Oy_arr</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="c1"># Normal force
</span><span class="n">N_arr</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="c1"># -----------------------------
</span>
<span class="k">def</span> <span class="nf">build_linear_system</span><span class="p">(</span><span class="n">th1</span><span class="p">,</span> <span class="n">th2</span><span class="p">,</span> <span class="n">th3</span><span class="p">,</span> <span class="n">th4</span><span class="p">,</span> <span class="n">th5</span><span class="p">,</span> <span class="n">Fs</span><span class="p">):</span>
    <span class="s">"""
    Builds 9x9 linear system M*X = b for the linkage problem
    """</span>
    <span class="n">M</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>

    <span class="c1"># Force components
</span>    <span class="n">M</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># Fx eq
</span>    <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">Fs</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">radians</span><span class="p">(</span><span class="n">th5</span><span class="p">))</span>

    <span class="n">M</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># Fy eq
</span>    <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">Fs</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">radians</span><span class="p">(</span><span class="n">th5</span><span class="p">))</span>

    <span class="c1"># Moment about link 3
</span>    <span class="n">M</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">l_3</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">radians</span><span class="p">(</span><span class="n">th3</span><span class="p">)),</span> <span class="o">-</span><span class="n">l_3</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">radians</span><span class="p">(</span><span class="n">th3</span><span class="p">))]</span>
    <span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">l_5</span> <span class="o">*</span> <span class="n">Fs</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">radians</span><span class="p">(</span><span class="n">th5</span> <span class="o">-</span> <span class="n">th4</span><span class="p">))</span>

    <span class="c1"># Geometric constraints
</span>    <span class="n">M</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">M</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">M</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">b</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">M</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">l_2</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">radians</span><span class="p">(</span><span class="n">th2</span><span class="p">)),</span> <span class="n">l_2</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">radians</span><span class="p">(</span><span class="n">th2</span><span class="p">))]</span>
    <span class="n">b</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">M</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">b</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">M</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">b</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Link 1 moment
</span>    <span class="n">M</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">l_1</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">radians</span><span class="p">(</span><span class="n">th1</span><span class="p">)),</span> <span class="n">l_1</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">radians</span><span class="p">(</span><span class="n">th1</span><span class="p">))]</span>
    <span class="n">b</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="n">M</span><span class="p">,</span> <span class="n">b</span>

<span class="c1"># -----------------------------
# Solve system for each set of angles
</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">M</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">build_linear_system</span><span class="p">(</span><span class="n">th1_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">th2_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">th3_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                               <span class="n">th4_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">th5_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Fs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    
    <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="n">solve</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

    <span class="c1"># Unpack solution into arrays
</span>    <span class="n">Ax_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Ay_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> \
    <span class="n">Bx_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">By_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> \
    <span class="n">Cx_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Cy_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> \
    <span class="n">Ox_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Oy_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> \
    <span class="n">N_arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span>
</code></pre></div></div>
<h2 id="numerical-simulation">Numerical Simulation</h2>
<p>Since the suspension geometry changes with wheel displacement, the system does not obey a linear Hooke’s Law ($F=ky$). Instead, we calculate the effective spring constant as the derivative of the vertical force ($N$) with respect to vertical displacement of the wheel ($dN/dy$).</p>

<p><small><em>Normal reaction force $N$ on the pushrod and effective spring constant $k_{eff} = dN/dy$ as a function of wheel displacement.</em></small></p>
<div style="width: fit-content; margin: 0 auto;">



<div class="image-gallery" style="--gallery-height: 400px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/N%20Plot.png" class="glightbox" data-gallery="gallery-fsae-suspension-dynamics-modeling">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/N%20Plot.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/N%20Plot.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Keff.png" class="glightbox" data-gallery="gallery-fsae-suspension-dynamics-modeling">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Keff.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Keff.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<p>Knowing the effective spring constant as a function of wheel displacement, we can simulate the free oscillation of the car chassis as a mass-spring system using the ODE:</p>

\[m \frac{d^2 y}{dt^2} + c \frac{dy}{dt} + k_{\rm eff}(y) \, (y - y_{\rm eq}) = 0\]

<p>The initial conditions were determined from video analysis of the actual suspension oscillation:</p>

\[y(0) = -0.0233 \, \mathrm{m}, \quad
y'(0) = 0 \, \mathrm{m/s}, \quad
y_{\rm eq} = -0.0295 \, \mathrm{m}\]

<p>We numerically solved this ODE using Python’s <span style="color: #333333; font-family: monospace;">solve_ivp</span> function. The mass and damping coefficient were tuned to best fit the experimental data, resulting in:</p>

\[m = 1000 \, \mathrm{kg}, \quad
c = 4000 \, \mathrm{N \cdot s/m}\]

<p><small><em>Code for numerically solving the effective spring constant and ODE.</em></small></p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -----------------------------
# y coordinate (vertical position of point A)
# -----------------------------
</span><span class="n">y</span> <span class="o">=</span> <span class="n">A</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># -----------------------------
# Direct stiffness: dN/dy
# -----------------------------
</span><span class="n">k_eff</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">gradient</span><span class="p">(</span><span class="n">N_arr</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">k_interp</span> <span class="o">=</span> <span class="n">interp1d</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">k_eff</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="s">"extrapolate"</span><span class="p">)</span>

<span class="c1"># ---- Simulation parameters ----
</span><span class="n">m</span> <span class="o">=</span> <span class="mi">1000</span> <span class="c1">#66.904875    # sprung mass [kg]
</span><span class="n">c</span> <span class="o">=</span> <span class="mi">4000</span>       <span class="c1"># damping [N·s/m] (lower for visible oscillation)
</span><span class="n">x_init</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.023394191990219634</span>   <span class="c1"># Positive is downward from equilibrium
</span><span class="n">x_eq</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.0295</span>  <span class="c1"># equilibrium position
</span><span class="n">v_init</span> <span class="o">=</span> <span class="mf">0.0</span>    <span class="c1"># small initial velocity optional
</span><span class="n">t_final</span> <span class="o">=</span> <span class="mi">3</span>    <span class="c1"># seconds
</span><span class="n">dt</span> <span class="o">=</span> <span class="mf">0.001</span>

<span class="c1"># ---- Nonlinear spring-mass-damper ODE ----
</span><span class="k">def</span> <span class="nf">spring_mass</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">state</span>
    <span class="n">k_local</span> <span class="o">=</span> <span class="n">k_interp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>        <span class="c1"># wheel-rate at current displacement
</span>    <span class="n">F_ext</span> <span class="o">=</span> <span class="mf">0.0</span>                  <span class="c1"># no external force
</span>    <span class="n">F_spring</span> <span class="o">=</span> <span class="n">k_local</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x_eq</span><span class="p">)</span> <span class="c1"># spring force relative to equilibrium position
</span>    <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">F_ext</span> <span class="o">-</span> <span class="n">c</span><span class="o">*</span><span class="n">v</span> <span class="o">-</span> <span class="n">F_spring</span><span class="p">)</span> <span class="o">/</span> <span class="n">m</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">]</span>

<span class="c1"># ---- Solve ODE ----
</span><span class="n">t_eval</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t_final</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
<span class="n">ic</span> <span class="o">=</span> <span class="p">[</span><span class="n">x_init</span><span class="p">,</span> <span class="n">v_init</span><span class="p">]</span>
<span class="n">sol</span> <span class="o">=</span> <span class="n">solve_ivp</span><span class="p">(</span><span class="n">spring_mass</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">t_final</span><span class="p">],</span> <span class="n">ic</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">c</span><span class="p">),</span> <span class="n">t_eval</span><span class="o">=</span><span class="n">t_eval</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1e-8</span><span class="p">)</span>
</code></pre></div></div>

<p><small><em>The simulation models the vertical displacement of the car chassis ($y$) over time.</em></small></p>
<div style="width: fit-content; margin: 0 auto;">



<div class="image-gallery" style="--gallery-height: 400px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Simulation.png" class="glightbox" data-gallery="gallery-fsae-suspension-dynamics-modeling">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Simulation.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Simulation.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<p><small><em>Comparison of simulated and experimental suspension oscillation.</em></small></p>
<div style="width: fit-content; margin: 0 auto;">



<div class="image-gallery" style="--gallery-height: 400px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Validation.png" class="glightbox" data-gallery="gallery-fsae-suspension-dynamics-modeling">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Validation.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/FSAE%20Suspension%20Modeling/Validation.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<p><small><em>Ground truth video showing shock absorbers decompressing and oscillating after the applied load is removed.</em></small></p>
<div style="display: flex; justify-content: center; align-items: flex-start; gap: 20px; height: 500px; width: 100%;">
  <div class="youtube-wrapper" style="flex: 0 0 auto; width: fit-content; height: 100%;">
    <div class="youtube-container" style="--max-width: 560px">
    <div class="youtube-aspect-ratio normal"><iframe src="https://www.youtube-nocookie.com/embed/Dv6SuCOE8nw?rel=0&amp;autoplay=1&amp;mute=1&amp;loop=1&amp;playlist=Dv6SuCOE8nw" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" referrerpolicy="no-referrer-when-downgrade">
        </iframe>
    </div>
</div>
  </div>  
</div>

<h1 id="conclusion">Conclusion</h1>
<p>The simulation successfully modeled the exponential decay of the suspension’s amplitude. By mapping the simulated chassis displacement $y(t)$ back to the equivalent spring displacement, we validated the model against experimental video tracking data. While the frequency matched, the simulation required a tuned mass of 1000 kg, roughly four times the actual car mass. This discrepancy suggests our simplified model overestimated the real suspension stiffness, likely due to neglected internal reaction forces from tires and the lower control arm.</p>

<h1 id="my-role-and-reflections">My Role and Reflections</h1>
<p>I was mainly responsible for the simulation code, data analysis, and setting up the kinematics and statics equations. While we got a working simulation, we ran into many conceptual hurdles, particularly with determining how to determine the effect of the suspension linkage on the effective spring constant used to model the car as a spring mass system. Additionally, validating our results and analyzing the discrepancies in how we simplified the model proved to be more challenging than expected. Overall, thinking about engineering and modeling through these sanity checks really puts into perspective the reality of these physical behaviors.</p>

<h2 id="extra">Extra</h2>
<p><small><em>Animation of suspension linkage motion, note that the actual range of motion is actually much smaller (10-12 deg) instead of the range shown (0-30 deg)</em></small></p>
<div style="width: fit-content; margin: 0 auto;">
  


<div class="image-gallery" style="--gallery-height: 500px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/LaTex/refs/heads/main/Fall%202025%20Notes/Dynamics/Project/four_bar_linkage_NEW.gif" class="glightbox" data-gallery="gallery-fsae-suspension-dynamics-modeling">
          <img src="https://raw.githubusercontent.com/zeshui-song/LaTex/refs/heads/main/Fall%202025%20Notes/Dynamics/Project/four_bar_linkage_NEW.gif" alt="https://raw.githubusercontent.com/zeshui-song/LaTex/refs/heads/main/Fall%202025%20Notes/Dynamics/Project/four_bar_linkage_NEW.gif" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<p><a href="https://github.com/zeshui-song/LaTex/blob/main/Fall%202025%20Notes/Dynamics/Project/gif%20export.ipynb" target="_blank">Animation Code</a><br />
<a href="https://github.com/zeshui-song/zeshui-song.github.io/blob/main/_projects/FSAE%20Suspension%20Modeling/Suspension%20Simulation.ipynb" target="_blank">Full Python Code</a><br />
<a href="/_projects/FSAE%20Suspension%20Modeling/main.pdf" target="_blank">Final Report</a></p>

    </div>
</div></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>

<!-- GLightbox JS -->
<script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
<script type="text/javascript">
  // This runs ONCE when the whole page is finished loading
  document.addEventListener('DOMContentLoaded', function() {
    const lightbox = GLightbox({
      selector: '.glightbox',
      touchNavigation: true,
      loop: true,
      zoomable: true,
      draggable: true
    });
  });
</script>
<footer>
    <div class="wave-wrapper">
        <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 150 150" preserveAspectRatio="none" shape-rendering="auto">
            <defs>
                <path id="gentle-wave" d="M-160 44c30 0 58-48 88-48s 58 48 88 48 58-48 88-48 58 48 88 48 v250h-352z" />
            </defs>
            <g class="parallax">
                <use xlink:href="#gentle-wave" x="48" y="35" fill="rgba(0, 123, 255, 0.05)" />
                <use xlink:href="#gentle-wave" x="48" y="40" fill="rgba(0, 123, 255, 0.03)" />
                <use xlink:href="#gentle-wave" x="48" y="45" fill="rgba(0, 123, 255, 0.02)" />
                <use xlink:href="#gentle-wave" x="48" y="50" fill="rgba(0, 123, 255, 0.07)" />
            </g>
        </svg>
    </div>

    <div class="footer-content-wrapper">
        <div class="links">
            <a href="/"><span>Home</span></a>
            <a href="/projects/"><span>Projects</span></a>
            <a href="/research/"><span>Research</span></a>
            <a href="/about/"><span>About</span></a>
            <a href="/Resume/main.pdf" target="_blank" rel="noopener noreferrer"><span>Resume</span></a>
        </div>

        <div class="license">
            <p class="license-text">
                Based on Free-To-Engineer portfolio template © 2025 by lowinertia.com is licensed under 
                <a href="https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="noopener noreferrer" style="color: inherit; text-decoration: underline;">CC BY 4.0</a>
            </p>
        </div>

        <div class="footer-status">
            <p>Last Updated: 2026-01-16 22:53 EST</p>
        </div>
    </div>

    <script>
        // Randomize wave start positions on initialization
        document.addEventListener('DOMContentLoaded', () => {
            const waves = document.querySelectorAll('.parallax > use');
            waves.forEach(wave => {
                const duration = parseFloat(getComputedStyle(wave).animationDuration);
                const randomDelay = -Math.random() * duration;
                wave.style.animationDelay = `${randomDelay}s`;
            });
        });
    </script>
</footer>
</body>

    
</html>