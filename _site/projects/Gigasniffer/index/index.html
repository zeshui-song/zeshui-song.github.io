<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/syntax.css">

    <script src="/assets/js/script.js"></script>
    
    <!-- MathJax (LaTeX support) -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          packages: {'[+]': ['ams']}
        },
        chtml: { displayAlign: 'center' }
      };
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
      async>
    </script>
    <!-- End MathJax -->

<!-- Favicon -->
<link rel="icon" href="/assets/favicon_io/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon_io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon_io/favicon-16x16.png">
<link rel="apple-touch-icon" href="/assets/favicon_io/apple-touch-icon.png">
<!-- End Favicon -->

<!-- PREVIEW METADATA -->
<meta property="og:type" content="website">
<meta property="og:url" content="http://localhost:4000/projects/Gigasniffer/index/">
<meta property="og:title" content="GigaSniffer: Portable Produce Freshness Detector">


<meta property="og:description" content="New York City generates nearly 4 million tons of food waste annually, much of it edible at the time of disposal. A major contributor is uncertainty around food freshness, driven by unreliable expir...">


  
  

  
  

  
  
  
  

  <meta property="og:image" content="https:/raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/IMG_20241219_132228564_HDR.jpg">
  <meta name="twitter:image" content="https:/raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/IMG_20241219_132228564_HDR.jpg">


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="GigaSniffer: Portable Produce Freshness Detector">
<meta name="twitter:description" content="New York City generates nearly 4 million tons of food waste annually, much of it edible at the time of disposal. A major contributor is uncertainty around food freshness, driven by unreliable expir...">
<meta name="twitter:image:aspect_ratio" content="1.91:1">
<!-- END PREVIEW METADATA -->

<!-- GLightbox for Image Galleries -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
    
    <title>Zeshui Song's Portfolio</title>
</head>
<body>
    <!-- NAVBAR -->
     <style>
    /* 1. Define a consistent breakpoint for the "Mobile UI" */
    @media (max-width: 768px) {
        #mainNav {
            height: 20px !important; 
            padding: 0 !important;
            margin-bottom: 40px !important;
        }
        #canvasParent { display: none !important; }
        .desktop-nav { display: none !important; }
        .menu-toggle {
            display: block !important;
            margin-top: 40px !important; 
            background: none;
            border: none;
            cursor: pointer;
            z-index: 11;
            position: relative;
        }
    }

    /* Desktop defaults */
    .menu-toggle { display: none; outline: none; color: var(--text-color, #000); }
    .mobile-nav { display: none; }
    .nav-open .mobile-nav {
        display: flex; flex-direction: column; position: absolute;
        top: 60px; right: 0; background: #fff; width: 100%;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 10;
    }
    .mobile-nav a { padding: 15px; text-align: center; border-bottom: 1px solid #eee; text-decoration: none; color: #333; }
</style>

<nav id="mainNav" style="display: flex; align-items: center; justify-content: space-between; padding: 10px 0; height: 80px; position: relative;">
    <div id="canvasParent" style="flex: 1; height: 100%; display: flex; align-items: center; overflow: hidden; margin-right: 20px;">
        <canvas id="cycloidCanvas" style="width: 100%; height: 60px; display: block;"></canvas>
    </div>

    <div class="right desktop-nav">
        <a href="/"><span>Home</span></a>
        <a href="/projects/"><span>Projects</span></a>
        <a href="/research/"><span>Research</span></a>
        <a href="/about/"><span>About</span></a>
        <a href="/Resume/main.pdf" target="_blank" rel="noopener noreferrer">
            <span>Resume</span>
        </a>
    </div>

    <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
        <i class="fa fa-bars fa-2x"></i>
    </button>

    <div class="mobile-nav">
        <a href="/"><span>Home</span></a>
        <a href="/projects/"><span>Projects</span></a>
        <a href="/research/"><span>Research</span></a>
        <a href="/about/"><span>About</span></a>
        <a href="/Resume/main.pdf" target="_blank" rel="noopener noreferrer">
            <span>Resume</span>
        </a>
    </div>
</nav>

<script>
    const canvas = document.getElementById('cycloidCanvas');
    const ctx = canvas.getContext('2d');
    const parent = document.getElementById('canvasParent');
    const mainNav = document.getElementById('mainNav');
    const menuToggle = document.getElementById('menuToggle');

    const isAboutPage = window.location.pathname.includes('/about/');
    const isResearchPage = window.location.pathname.includes('/research/');
    const isProjectsPage = window.location.pathname.includes('/projects/');

    let angle = 0, xOffset = 0, direction = 1, isErasing = false;
    let waveTime = 0, wavefrontX = 0, reflectedFrontX = 0, wavePhase = 'propagating';
    let particles = [];
    const numParticles = 8;
    const radius = 14, armLength = 22, speed = 0.05, agnesiSpeed = 0.8; 
    let points = [];
    let isRolling = true, dpr, w, h, centerY;

    menuToggle.addEventListener('click', () => {
        mainNav.classList.toggle('nav-open');
    });

    function createCRTParticle() {
        const spread = 44;
        const startY = centerY + (Math.random() - 0.5) * spread;
        const normalizedY = (startY - (centerY - spread/2)) / spread;
        const hue = 240 - (normalizedY * 65); 
        const colorHue = hue;

        return {
            x: -20, 
            y: startY, 
            vx: 1.0 + Math.random() * 0.8, 
            vy: 0, 
            charge: Math.random() > 0.5 ? 1 : -1, 
            hue: colorHue,
            hasHit: false,
            headOpacity: 1.0,
            history: []
        };
    }

    function resize() {
        if (!parent) return;
        dpr = window.devicePixelRatio || 1;
        w = parent.offsetWidth;
        h = 60; 
        canvas.width = w * dpr;
        canvas.height = h * dpr;
        ctx.scale(dpr, dpr);
        centerY = h / 2; 
        points = [];
        angle = 0;
        xOffset = -(w * 0.45);
        direction = 1; isErasing = false; isRolling = true;
        wavefrontX = 40; reflectedFrontX = w - 40; wavePhase = 'propagating';
        particles = Array.from({ length: numParticles }, createCRTParticle);
    }

    window.addEventListener('resize', resize);
    resize();

    function draw() {
        if (mainNav.classList.contains('nav-open') || getComputedStyle(document.getElementById('canvasParent')).display === 'none') {
            requestAnimationFrame(draw);
            return;
        }

        ctx.clearRect(0, 0, w, h);
        let px, py, centerX;
        const limit = w * 0.45;

        if (isResearchPage) {
            waveTime += 0.05;
            const margin = 40, rightBound = w - margin, propSpeed = 2.5;
            const pipeHalfHeight = 25, amp = 12, L = rightBound - margin, freq = (2 * Math.PI) / (L / 2);

            if (wavePhase === 'propagating') {
                wavefrontX += propSpeed;
                if (wavefrontX >= rightBound) { wavefrontX = rightBound; wavePhase = 'reflecting'; }
            } else if (wavePhase === 'reflecting') {
                reflectedFrontX -= propSpeed;
                if (reflectedFrontX <= margin) { reflectedFrontX = margin; wavePhase = 'steady'; }
            }

            ctx.beginPath();
            ctx.strokeStyle = '#000'; ctx.lineWidth = 2.5;
            ctx.moveTo(margin, centerY - pipeHalfHeight); ctx.lineTo(rightBound, centerY - pipeHalfHeight);
            ctx.moveTo(margin, centerY + pipeHalfHeight); ctx.lineTo(rightBound, centerY + pipeHalfHeight);
            ctx.stroke();

            ctx.beginPath(); ctx.strokeStyle = '#ddd'; ctx.lineWidth = 1.2;
            for (let x = margin; x <= wavefrontX; x++) {
                const y = centerY + amp * Math.cos(freq * (x - margin) - waveTime);
                if (x === margin) ctx.moveTo(x, y); else ctx.lineTo(x, y);
            }
            ctx.stroke();

            if (wavePhase !== 'propagating') {
                ctx.beginPath(); ctx.setLineDash([4, 4]); ctx.strokeStyle = '#ccc';
                for (let x = rightBound; x >= reflectedFrontX; x--) {
                    const y = centerY + amp * Math.cos(freq * (x - margin) + waveTime);
                    if (x === rightBound) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                }
                ctx.stroke(); ctx.setLineDash([]);
                
                ctx.beginPath(); ctx.strokeStyle = 'rgba(0, 123, 255, 0.7)'; ctx.lineWidth = 2.5;
                for (let x = reflectedFrontX; x <= rightBound; x++) {
                    const y1 = amp * Math.cos(freq * (x - margin) - waveTime);
                    const y2 = amp * Math.cos(freq * (x - margin) + waveTime);
                    const y = centerY + (y1 + y2);
                    if (x === Math.ceil(reflectedFrontX)) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }

        } else if (isProjectsPage) {
            const plateX = w - 20;
            const fieldEnd = plateX - 40; 
            const fieldStart = fieldEnd - 50; 

            ctx.fillStyle = 'rgba(50, 50, 50, 0.1)';
            ctx.fillRect(fieldStart, 5, fieldEnd - fieldStart, h - 10);
            
            ctx.beginPath();
            ctx.moveTo(plateX, 5); ctx.lineTo(plateX, h - 5);
            ctx.lineWidth = 3; ctx.strokeStyle = '#222'; ctx.stroke();

            particles.forEach((p, idx) => {
                if (!p.hasHit) {
                    p.history.push({x: p.x, y: p.y});
                    if (p.x > fieldStart && p.x < fieldEnd) {
                        const fieldStrength = 0.016; 
                        p.vy += fieldStrength * p.charge;
                    }
                    p.x += p.vx;
                    p.y += p.vy;

                    if (p.x >= plateX) {
                        p.x = plateX;
                        p.hasHit = true;
                    }
                    // Off-screen handling
                    if (p.y > h + 20 || p.y < -20) p.hasHit = true; 
                } else {
                    // Start erasing the tail as soon as it hits or goes off screen
                    if (p.history.length > 0) {
                        p.history.shift();
                    } else {
                        // Once trace is gone, fade out the particle head
                        p.headOpacity -= 0.1;
                    }
                }

                // Draw Path Trace
                if (p.history.length > 1) {
                    ctx.beginPath();
                    ctx.strokeStyle = `hsla(${p.hue}, 100%, 50%, 0.45)`;
                    ctx.lineWidth = 1.6;
                    ctx.moveTo(p.history[0].x, p.history[0].y);
                    for(let i=1; i < p.history.length; i++) {
                        ctx.lineTo(p.history[i].x, p.history[i].y);
                    }
                    ctx.stroke();
                }

                // Draw Particle Head (if it hasn't hit or is still fading)
                if (p.headOpacity > 0 && p.history.length > 0) {
                     ctx.beginPath();
                     ctx.arc(p.x, p.y, 2.4, 0, Math.PI * 2);
                     ctx.fillStyle = `hsla(${p.hue}, 100%, 50%, ${p.headOpacity})`;
                     ctx.fill();
                }

                // Respawn when fully invisible
                if (p.headOpacity <= 0) {
                    particles[idx] = createCRTParticle();
                }
            });

        } else if (isAboutPage) {
            const a = radius; centerX = w / 2;
            const groundY = h - 10; px = centerX + xOffset;
            const yFromBottom = (8 * Math.pow(a, 3)) / (Math.pow(xOffset, 2) + 4 * Math.pow(a, 2));
            py = groundY - yFromBottom;

            if (!isErasing) {
                points.push({x: px, y: py});
                xOffset += (agnesiSpeed * direction);
                if (xOffset > limit || xOffset < -limit) isErasing = true;
            } else {
                if (points.length > 0) points.splice(0, 4); 
                else { direction *= -1; isErasing = false; }
            }
        } else {
            centerX = (radius * angle) - radius;
            px = centerX - armLength * Math.sin(angle);
            py = centerY + armLength * Math.cos(angle);

            if (isRolling) {
                points.push({x: px, y: py});
                angle += speed;
                if (centerX > w + armLength + radius) isRolling = false;
            } else {
                if (points.length > 0) points.splice(0, 3);
                else { isRolling = true; angle = 0; }
            }
        }

        if (!isResearchPage && !isProjectsPage && points.length > 1) {
            ctx.beginPath(); ctx.strokeStyle = 'rgba(0, 123, 255, 0.4)';
            ctx.lineWidth = 2.5; ctx.lineCap = 'round';
            ctx.moveTo(points[0].x, points[0].y);
            for (let i = 1; i < points.length; i++) ctx.lineTo(points[i].x, points[i].y);
            ctx.stroke();
        }

        if (!isResearchPage && !isProjectsPage && (isAboutPage || isRolling)) {
            ctx.lineWidth = 1.2;
            if (isAboutPage) {
                const a = radius, groundY = h - 10, circleX = w / 2, circleY = groundY - a, topY = groundY - 2 * a;
                ctx.beginPath(); ctx.moveTo(centerX - limit, topY); ctx.lineTo(centerX + limit, topY);
                ctx.strokeStyle = '#eee'; ctx.stroke();
                ctx.beginPath(); ctx.arc(circleX, circleY, a, 0, Math.PI * 2);
                ctx.strokeStyle = '#444'; ctx.stroke();
                const yFromBottom = groundY - py;
                const intersectionX = circleX + (yFromBottom * (xOffset / (2 * a)));
                ctx.setLineDash([2, 2]); ctx.strokeStyle = '#bbb';
                ctx.beginPath(); ctx.moveTo(circleX, groundY); ctx.lineTo(px, topY); ctx.stroke();
                ctx.strokeStyle = '#28a745'; ctx.beginPath();
                ctx.moveTo(px, py); ctx.lineTo(px, topY); ctx.moveTo(px, py); ctx.lineTo(intersectionX, py); ctx.stroke();
                ctx.setLineDash([]); ctx.beginPath(); ctx.arc(intersectionX, py, 3, 0, Math.PI * 2);
                ctx.fillStyle = '#888'; ctx.fill();
            } else {
                ctx.beginPath(); ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                ctx.strokeStyle = '#444'; ctx.stroke();
                ctx.beginPath(); ctx.moveTo(centerX, centerY); ctx.lineTo(px, py);
                ctx.strokeStyle = '#bbb'; ctx.stroke();
            }
            ctx.beginPath(); ctx.arc(px, py, 4, 0, Math.PI * 2);
            ctx.fillStyle = '#007bff'; ctx.fill();
        }
        requestAnimationFrame(draw);
    }
    draw();
</script>

     <div class="page"><style>
    /* 1. Reset the header container */
    .post-view .title-header {
        display: block !important; 
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        line-height: 0 !important;
    }

    .project-logo-wrapper {
        display: block !important;
        margin-bottom: 15px !important;
        width: 100% !important;
    }

    /* 2. Target the logo and KILL the 3/1 aspect-ratio from your main CSS */
    .post-view .summary img.project-logo-img {
        /* Dimensions */
        height: 60px !important;    /* Desktop requirement */
        width: auto !important;      /* Stops it from stretching to 100% width */
        
        /* Overriding your main.css rules */
        aspect-ratio: auto !important; /* CRITICAL: Kills the 3/1 crop */
        object-fit: contain !important;
        object-position: left;
        
        /* Resetting spacing */
        margin: 0 !important;
        padding: 0 !important;
        max-width: 100% !important;
        border-radius: 0 !important; /* Removes border-radius if not wanted on logo */
    }

    /* 3. Mobile adjustments */
    @media (max-width: 768px) {
        .post-view .summary img.project-logo-img {
            height: 40px !important; /* Mobile requirement */
        }
    }
</style>

<div class="post-view">
    <div class="summary">
        
               
        <img src="/_projects/Gigasniffer//IMG_20241219_132228564_HDR.jpg" alt="GigaSniffer: Portable Produce Freshness Detector image">
        
        <div class="title-header">
            
                <h1>GigaSniffer: Portable Produce Freshness Detector</h1>
            
        </div>

        <div class="project-timeline">
            <span class="academic-level">College</span>
            <span class="academic-period">Freshman Fall</span>
        </div>
        
        <div class="project-description">
            <h2>Project Overview</h2>
            <p>New York City generates nearly 4 million tons of food waste annually, much of it edible at the time of disposal. A major contributor is uncertainty around food freshness, driven by unreliable expiration dates that fail to account for storage conditions. GigaSniffer is a portable device designed to reduce household food waste by detecting early-stage spoilage in produce through gas emissions rather than printed dates. Inspired by the way fruit flies detect rotting fruit through airborne chemicals, GigaSniffer measures carbon dioxide (CO₂) and ethanol emissions to infer freshness and alert users when produce is nearing spoilage.</p>
        </div>
        
        <div class="skills-card">
            <h2>Skills Used</h2> 
            <div class="skills-list">
                
                <span class="skill">Arduino Programming</span>    
                
                <span class="skill">Gaseous Sensor Calibration</span>    
                
                <span class="skill">Multisensor Interfacing</span>    
                
                <span class="skill">Real-Time Sensor Data Visualization</span>    
                
                <span class="skill">Laser Cutting</span>    
                
                <span class="skill">Breadboard Prototyping</span>    
                
            </div>
        </div>
    </div>
      
    <div class="content">
        <p><strong>The Best Team Ever:</strong> Allen Punnoose, Ahikara Sandrasagra, Christopher Sgambati, Somin Lee, Zehra Girgin, Zeshui Song<br />
<strong>Course:</strong> EID 101B<br />
<strong>Duration:</strong> Sep–Dec 2024</p>

<hr />
<h1 id="how-it-works">How it Works</h1>
<p>GigaSniffer is a sensor-based freshness indicator that evaluates produce condition by monitoring changes in CO₂ and ethanol concentrations within an enclosed chamber. By tracking deviations from baseline levels, the device categorizes produce as fresh, nearing spoilage, or spoiled.</p>
<h1 id="engineering-and-design">Engineering and Design</h1>

<h2 id="bio-inspiration">Bio-inspiration:</h2>
<ul>
  <li>Modeled after fruit fly olfactory systems that respond to ethanol and CO₂ from decaying fruit.</li>
</ul>

<h2 id="hardware">Hardware:</h2>
<ul>
  <li>CO₂ and ethanol gas sensors</li>
  <li>Arduino Mega (upgraded from Uno due to memory constraints)</li>
  <li>Laser-cut acrylic and wood enclosure for controlled sensing</li>
  <li>Integrated display for real-time feedback</li>
</ul>
<div style="width: fit-content; margin: 0 auto;">



<div class="image-gallery" style="--gallery-height: 400px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Diagram.png" class="glightbox" data-gallery="gallery-gigasniffer-portable-produce-freshness-detector">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Diagram.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Diagram.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Fruit%20Chamber.jpg" class="glightbox" data-gallery="gallery-gigasniffer-portable-produce-freshness-detector">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Fruit%20Chamber.jpg" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Fruit%20Chamber.jpg" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<h2 id="software">Software:</h2>
<ul>
  <li>Rolling-average algorithm using the 10 most recent samples to smooth noisy signals and minimize false positives and outliers</li>
</ul>

<p><small><em>Maintains a circular buffer of recent readings to compute rolling averages and smooth sensor noise.</em></small></p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Update rolling buffer with latest readings</span>
<span class="n">co2Readings</span><span class="p">[</span><span class="n">bufferIndex</span><span class="p">]</span> <span class="o">=</span> <span class="n">co2Value</span><span class="p">;</span>
<span class="n">alcoholReadings</span><span class="p">[</span><span class="n">bufferIndex</span><span class="p">]</span> <span class="o">=</span> <span class="n">alcoholValue</span><span class="p">;</span>
<span class="n">bufferIndex</span> <span class="o">=</span> <span class="p">(</span><span class="n">bufferIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">BUFFER_SIZE</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>Threshold-based spoilage detection (25 ppm CO₂, 165 ppm ethanol)</li>
</ul>

<p><small><em>Triggers alerts only when recent readings deviate significantly from the rolling average, reducing false positives.</em></small></p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Check for significant deviations and print alerts</span>
<span class="kt">float</span> <span class="n">co2Difference</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">co2Readings</span><span class="p">[</span><span class="n">lastIndex</span><span class="p">]</span> <span class="o">-</span> <span class="n">co2Average</span><span class="p">);</span>
<span class="kt">float</span> <span class="n">alcoholDifference</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">alcoholReadings</span><span class="p">[</span><span class="n">lastIndex</span><span class="p">]</span> <span class="o">-</span> <span class="n">alcoholAverage</span><span class="p">);</span>

 <span class="k">if</span> <span class="p">(</span><span class="n">co2Difference</span> <span class="o">&gt;</span> <span class="n">CO2_DIFFERENCE_THRESHOLD</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Hi CO2: "</span><span class="p">);</span>
   <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">co2Readings</span><span class="p">[</span><span class="n">lastIndex</span><span class="p">]);</span>
   <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" ppm</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="n">alcoholDifference</span> <span class="o">&gt;</span> <span class="n">ALCOHOL_DIFFERENCE_THRESHOLD</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Hi Alco: "</span><span class="p">);</span>
   <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">alcoholReadings</span><span class="p">[</span><span class="n">lastIndex</span><span class="p">]);</span>
   <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><small><em>Implements a freshness classification algorithm using CO₂ and alcohol deviation thresholds, with CO₂ rising first as an early spoilage indicator </em></small></p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bool</span> <span class="n">fresh</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> 
<span class="n">bool</span> <span class="n">soon</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> 
<span class="n">bool</span> <span class="n">rot</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> 
<span class="k">if</span><span class="p">(</span><span class="n">alcoholDifference</span> <span class="o">&gt;</span> <span class="n">ALCOHOL_DIFFERENCE_THRESHOLD</span><span class="p">){</span>
   <span class="n">fresh</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>  
   <span class="n">soon</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> 
   <span class="n">rot</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> 
<span class="p">}</span>
<span class="k">else</span> <span class="nf">if</span><span class="p">((</span><span class="n">co2Difference</span> <span class="o">&gt;</span> <span class="n">CO2_DIFFERENCE_THRESHOLD</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">alcoholDifference</span> <span class="o">&lt;</span> <span class="n">ALCOHOL_DIFFERENCE_THRESHOLD</span><span class="p">)){</span>
   <span class="n">fresh</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
   <span class="n">soon</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> 
   <span class="n">rot</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> 
<span class="p">}</span>
<span class="k">else</span><span class="p">{</span> 
   <span class="n">fresh</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> 
   <span class="n">soon</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> 
   <span class="n">rot</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> 
<span class="p">}</span>
</code></pre></div></div>
<ul>
  <li>Provides real-time visual feedback via RGB LED and graphical display to indicate freshness in real time</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Control the LED based on the state</span>
<span class="k">if</span> <span class="p">(</span><span class="n">rot</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">display</span><span class="p">.</span><span class="n">setTextSize</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> 
   <span class="n">display</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">350</span><span class="p">);</span>
   <span class="n">rgb</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Red for rotten</span>
   <span class="n">display</span><span class="p">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">RED</span><span class="p">);</span> 
   <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Rotten: Red LED On"</span><span class="p">);</span>
   <span class="n">display</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Rotten: Red LED On"</span><span class="p">);</span>
<span class="p">}</span> 
<span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">soon</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">display</span><span class="p">.</span><span class="n">setTextSize</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> 
   <span class="n">display</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
   <span class="n">rgb</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
   <span class="n">display</span><span class="p">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">YELLOW</span><span class="p">);</span> 
   <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Soon: Yellow LED On"</span><span class="p">);</span>
   <span class="n">display</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Soon: Yellow LED On"</span><span class="p">);</span>
<span class="p">}</span> 
<span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">fresh</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">display</span><span class="p">.</span><span class="n">setTextSize</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> 
   <span class="n">display</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
   <span class="n">rgb</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Green for fresh</span>
   <span class="n">display</span><span class="p">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">GREEN</span><span class="p">);</span> 
   <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Fresh: Green LED On"</span><span class="p">);</span>
   <span class="n">display</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Fresh: Green LED On"</span><span class="p">);</span>
<span class="p">}</span> 
<span class="k">else</span> <span class="p">{</span>
   <span class="n">rgb</span><span class="p">.</span><span class="n">off</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>
<p><a href="https://github.com/zeshui-song/zeshui-song.github.io/blob/main/_projects/Gigasniffer/Gigasniffer%20Code.ino" target="_blank">Full Arduino Code</a></p>
<h1 id="data">Data</h1>
<p>The prototype was tested on pears, raspberries, and bananas over eight days, with daily measurements of CO₂ and ethanol. As the fruits decayed, the amount of CO₂ and ethanol generally increased. Thresholds of 25 ppm CO₂ and 165 ppm ethanol were set based on observed trends to indicate when produce was no longer fresh (based on visual inspection).</p>
<div style="width: fit-content; margin: 0 auto;">



<div class="image-gallery" style="--gallery-height: 300px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/CO2.png" class="glightbox" data-gallery="gallery-gigasniffer-portable-produce-freshness-detector">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/CO2.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/CO2.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Ethanol.png" class="glightbox" data-gallery="gallery-gigasniffer-portable-produce-freshness-detector">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Ethanol.png" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Ethanol.png" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<h1 id="my-role-and-reflections">My Role and Reflections</h1>
<p>In this project, I focused on developing both the hardware and software for the device, while my teammates conducted experiments and collected data. Overall, the final prototype successfully measured CO₂ and ethanol levels in correlation to fruit freshness. However, testing revealed the challenge of obtaining reliable data, requiring long exposure durations and careful interpretation of the multiple sensor outputs. Throughout the process, our team learned the importance of collaboration, iterative design, and extensive testing.</p>
<div style="width: fit-content; margin: 0 auto;">
  


<div class="image-gallery" style="--gallery-height: 500px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Best%20team.jpg" class="glightbox" data-gallery="gallery-gigasniffer-portable-produce-freshness-detector">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Best%20team.jpg" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/Best%20team.jpg" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<h2 id="extra">Extra</h2>
<div style="width: fit-content; margin: 0 auto;">



<div class="image-gallery" style="--gallery-height: 300px;">
  
      
      
      

      <a href="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/giggasniff.jpg" class="glightbox" data-gallery="gallery-gigasniffer-portable-produce-freshness-detector">
          <img src="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/giggasniff.jpg" alt="https://raw.githubusercontent.com/zeshui-song/zeshui-song.github.io/refs/heads/main/_projects/Gigasniffer/giggasniff.jpg" loading="lazy" onerror="this.onerror=null;this.src=this.src.replace('.webp','.png').replace('.png','.webp');" />
      </a>
  
</div>
</div>

<p><a href="/_projects/Gigasniffer/EID101B_Team4_FinalReport.pdf" target="_blank">Final Report</a><br />
<a href="/_projects/Gigasniffer/EID101B_Team4_FinalDocumentation.pdf" target="_blank">Final Documentation</a></p>

    </div>
</div></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>

<!-- GLightbox JS -->
<script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
<script type="text/javascript">
  // This runs ONCE when the whole page is finished loading
  document.addEventListener('DOMContentLoaded', function() {
    const lightbox = GLightbox({
      selector: '.glightbox',
      touchNavigation: true,
      loop: true,
      zoomable: true,
      draggable: true
    });
  });
</script>
<footer>
    <div class="wave-wrapper">
        <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 150 150" preserveAspectRatio="none" shape-rendering="auto">
            <defs>
                <path id="gentle-wave" d="M-160 44c30 0 58-48 88-48s 58 48 88 48 58-48 88-48 58 48 88 48 v250h-352z" />
            </defs>
            <g class="parallax">
                <use xlink:href="#gentle-wave" x="48" y="35" fill="rgba(0, 123, 255, 0.05)" />
                <use xlink:href="#gentle-wave" x="48" y="40" fill="rgba(0, 123, 255, 0.03)" />
                <use xlink:href="#gentle-wave" x="48" y="45" fill="rgba(0, 123, 255, 0.02)" />
                <use xlink:href="#gentle-wave" x="48" y="50" fill="rgba(0, 123, 255, 0.07)" />
            </g>
        </svg>
    </div>

    <div class="footer-content-wrapper">
        <div class="links">
            <a href="/"><span>Home</span></a>
            <a href="/projects/"><span>Projects</span></a>
            <a href="/research/"><span>Research</span></a>
            <a href="/about/"><span>About</span></a>
            <a href="/Resume/main.pdf" target="_blank" rel="noopener noreferrer"><span>Resume</span></a>
        </div>

        <div class="license">
            <p class="license-text">
                Based on Free-To-Engineer portfolio template © 2025 by lowinertia.com is licensed under 
                <a href="https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="noopener noreferrer" style="color: inherit; text-decoration: underline;">CC BY 4.0</a>
            </p>
        </div>

        <div class="footer-status">
            <p>Last Updated: 2026-01-16 22:50 EST</p>
        </div>
    </div>

    <script>
        // Randomize wave start positions on initialization
        document.addEventListener('DOMContentLoaded', () => {
            const waves = document.querySelectorAll('.parallax > use');
            waves.forEach(wave => {
                const duration = parseFloat(getComputedStyle(wave).animationDuration);
                const randomDelay = -Math.random() * duration;
                wave.style.animationDelay = `${randomDelay}s`;
            });
        });
    </script>
</footer>
</body>

    
</html>